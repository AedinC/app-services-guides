== Creating Managed Kafka Using CLI

This project illustrates how you can create and generate connection 
details for your Managed Kafka cluster

NOTE: This guide uses rhoas cli, however users can also execute the same steps in cloud.redhat.com website


=== Prequisite

* Valid account in cloud.redhat.com
* https://github.com/bf2fc6cc711aee1a0c2a/cli/releases[rhoas cli]

=== Creating a Managed Kafka cluster

First you need a Kafka cluster. You can follow the instructions to
create one.

Using the https://github.com/bf2fc6cc711aee1a0c2a/cli/releases[RHOAS
CLI], login and create a new cluster:

[source,bash]
----
rhoas login
rhoas kafka create --name=<your-cluster-name>
----

Wait a couple of seconds for cluster to provision.

You can use the:

[source,bash]
----
rhoas kafka list
----

=== Retrieve Bootstrap URL

[source,bash]
----
CLUSTER_ID=$(rhoas kafka list | grep '<your-cluster-name>' | awk '{print $1}')
BOOTSTRAP_URL=$(rhoas kafka get $CLUSTER_ID | jq -r '.bootstrapServerHost')
----

Where `<your-cluster-name>` is the name of the cluster.

=== Create credentials that will be used to connect to cluster

----
rhoas serviceaccount create --name=<yourname> -o=env
----

This will generate .env file with content that should look as follows:
----
USER=srvc-acct-fdsfdsf
PASSWORD=323fsdf23-fgdsgdffsadsa
----